@model TangoApp.Models.Profile
@{
    /**/

    ViewBag.Title = "Show";
}

<h2>@Model.User.Email</h2>
<br />
@if (ViewBag.Message != null)
{
    <h3 class="alert alert-info" role="alert">@ViewBag.Message</h3>
}
@if (Model.UserId != ViewBag.currentUser)
{
    if (!ViewBag.NotFriends)
    {
        <form method="post" action="/Groups/ShowPrivateConv">
            <input type="hidden" name="UserId" value="@Model.UserId" />
            <button type="submit" class="btn btn-default">Trimite-i mesaj</button>
        </form>
    }
    if (ViewBag.Blocked)
    {
        <div class="list-group-item">
            <form method="post" action="/Users/Unblock">
                @Html.HttpMethodOverride(HttpVerbs.Delete)
                <input type="hidden" name="UserId" value="@Model.UserId" />
                <button type="submit">Unblock</button>
            </form>
        </div>
    }
    else
    {

        <p class="list-group-item-text d-block">
            <form method="post" action="/Users/Block">
                <input type="hidden" name="UserId" value="@Model.UserId" />
                <button type="submit">Block</button>
            </form>
        </p>
    }
    if (ViewBag.NotFriends && !ViewBag.Blocked)
    {
        if (ViewBag.Pending)
        {
            <button class="btn btn-info">Cerere trimisa</button>
        }
        else if (ViewBag.ExistsRequest)
        {
            <div class="card w-75">
                <div class="card-body">
                    <a href="/Friendships/Accept/@ViewBag.Request.FriendshipId" class="btn btn-primary">Accept</a>
                    @using (Html.BeginForm(actionName: "DeclineFromProfile", controllerName: "Friendships", method: FormMethod.Post, routeValues: new { id = ViewBag.Request.FriendshipId }))
                    {
                        @Html.HttpMethodOverride(HttpVerbs.Put)
                        <button type="submit" class="btn btn-primary">Decline</button>
                    }
                </div>
            </div>

        }
        else
        {
            <p class="list-group-item-text d-block">
                <form method="post" action="/Users/AddFriend">
                    <input type="hidden" name="UserId" value="@Model.UserId" />
                    <button type="submit">Add Friend</button>
                </form>
            </p>
        }

    }
    else if (!ViewBag.Blocked)
    {
        using (Html.BeginForm(actionName: "Unfriend", controllerName: "Users", method: FormMethod.Post))
        {
            @Html.HttpMethodOverride(HttpVerbs.Delete)
            <input type="hidden" name="UserId" value="@Model.UserId" />
            <button type="submit">Unfriend</button>
        }
    }
}
@if (Model.UserId == ViewBag.currentUser)
{
    <a href="/Profile/Edit/@Model.ProfileId" class="btn btn-success">Editeaza profilul</a>
}
<br /><br />
@if (Model.ProfileVisibility == true)
{
    <p>Profile visibility: public</p>
}
else
{
    <p>Profile visibility: private</p>
}

<p>
    Description: @if (@Model.Description != null)
    {
        @Model.Description;
    }
</p>

<p>
    @if (@Model.Gender != null)
    {
        if (Model.ProfileVisibility == true)
        {
        <p>Gender: female</p>
    }
    else
    {
        <p>Gender: male</p>
    }
}
    </p>

    <p>
        Country: @if (@Model.Country != null)
        {
            @Model.Country.CountryName
        }
    </p>

    <p>
        City: @if (@Model.City != null)
        {
            @Model.City.CityName
        }
    </p>

    <p>
        Birthday: @Html.DisplayFor(Model => Model.Birthday, "MM/dd/yyyy")
    </p>
